'use strict'

var GameEngine = require('../../shared/game_engine.js');
var GameComponent = require('../../shared/core/component.js');
<<<<<<< HEAD

function HealthBarComponent() {
	console.log("inside HealthBarComponent constr");
	this.key = 'health_bar';
=======
//Private

function HealthBarComponent(player) {
	console.log("inside HealthBarComponent constr");
	this.key = 'healthBar';
	this._playerReference = player;
>>>>>>> Started to implement life
}

HealthBarComponent.prototype = Object.create(GameComponent.prototype);
HealthBarComponent.prototype.constructor = HealthBarComponent;

HealthBarComponent.prototype.init = function() {
<<<<<<< HEAD
	//Delete this
	this.tick = 0;
	this.percentage = 1.0;
};

HealthBarComponent.prototype.update = function() {
	var currentHealth = this.owner.baseEntity.baseEntity.components.get("health").currentHealth;
	var maxHealth = this.owner.baseEntity.baseEntity.components.get("health").maxHealth;

	this.percentage = currentHealth / maxHealth;

	this.owner.components.get("sprite").cropHorizontally(this.percentage);
=======
};

HealthBarComponent.prototype.update = function() {
	var currentLife = 1.0*this._playerReference.components.get('life').getLife();
	var maxLife = 1.0*this._playerReference.components.get('life').getMaxLife();

	this.owner.components.get("sprite").cropImage('blood', currentLife/maxLife);
>>>>>>> Started to implement life
};

module.exports = HealthBarComponent;